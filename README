# Check out habs
git clone git://github.com/archhaskell/habs.git

# Extract the package list
scripts/extract-pkglist > PKGLIST

# Create chroots for building
scripts/setup-chroots

# Download the Hackage tarball
wget http://hackage.haskell.org/packages/archive/00-index.tar.gz
gunzip 00-index.tar.gz

# Create a new PKGBUILD tree
# TODO: implement setting pkgrel from PKGLIST in manycabal2arch
mkdir habs-new
manycabal2arch PKGLIST 00-index.tar habs-new &>! manycabal2arch.log

# Batch build it (use toposort from archlinux/tests)
# Packages go to chroot-$arch/repo
./makeworld

